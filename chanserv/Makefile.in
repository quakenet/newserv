@include@ @includel@../build.mk@includel@
@include@ @includel@build.mk@includel@

CSDIRS=database chancmds usercmds authcmds authtracker newsearch

.PHONY: all dirs $(CSDIRS) clean distclean
all: chanserv.so chanserv_protect.so chanserv_grep.so chanserv_relay.so chanserv_flags.so dirs

dirs: $(CSDIRS)
	ln -sf */*.so .

$(CSDIRS):
	cd $@ && $(MAKE) BUILDID=$(BUILDID) all

clean:
	rm -f */*.o */*.so

distclean:
	rm -f */autobuild.mk */Makefile

chanserv.so: chanservdb_updates.o chanserv.o chanservuser.o chanservnetevents.o chanservprivs.o chanservlog.o chanservstdcmds.o \
		chanservdump.o chanservschedule.o chanservcrypto.o authlib.o q9snprintf.o

chanserv_protect.so: chanserv_protect.o

chanserv_grep.so: chanserv_grep.o

chanserv_relay.so: chanserv_relay.o

chanserv_flags.so: chanserv_flags.o
