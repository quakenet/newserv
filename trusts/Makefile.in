@include@ @includel@../build.mk@includel@

TRUSTSDIRS=newsearch

.PHONY: all dirs $(TRUSTSDIRS) clean distclean

all: trusts.so trusts_commands.so trusts_policy.so trusts_migration.so trusts_db.so dirs

trusts.so: trusts.o data.o formats.o events.o

trusts_db.so: trusts_db.o

trusts_commands.so: trusts_commands.o

trusts_policy.so: trusts_policy.o

trusts_migration.so: trusts_migration.o db-migration.o migration.o

dirs: $(TRUSTSDIRS)
	ln -sf */*.so .

$(TRUSTSDIRS):
	cd $@ && $(MAKE) BUILDID=$(BUILDID) all

clean:
	rm -f */*.o */*.so

distclean:
	rm -f */Makefile

